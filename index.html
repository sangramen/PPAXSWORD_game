<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>소드 강화 게임 - 실시간 랭킹</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin-top: 30px;
        }

        #gameArea,
        #rankingBox {
            display: none;
        }

        #intro {
            margin-top: 100px;
        }

        #intro button {
            font-size: 32px;
            padding: 24px 60px;
            margin-top: 30px;
            cursor: pointer;
        }

        #shopButton {
            position: fixed;
            top: 48px;
            left: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 52px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            display: none;
            z-index: 999;
        }

        #shopArea {
            display: none;
            margin-top: 50px;
        }

        button {
            cursor: pointer;
        }

        img {
            margin: 20px;
        }

        #buyProtectBtn {
            font-size: 20px;
            padding: 12px 30px;
            margin-top: 20px;
            cursor: pointer;
        }

        .gameControl {
            display: none;
        }

        #infoBox {
            display: none;
            position: absolute;
            top: 60px;
            right: 50px;
            width: 320px;
            height: 450px;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            font-size: 20px;
            text-align: left;
            background: #f7f7f7;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
        }

        #gameOverScreen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
        }

        #gameOverVideo {
            max-width: 80%;
            max-height: 80%;
        }
    </style>
</head>

<body>

    <!-- 인트로 화면 -->
    <div id="intro">
        <h1>소드 강화 시뮬레이터</h1>
        <button onclick="startGame()">게임 시작</button>
    </div>

    <!-- 상점 버튼 -->
    <button id="shopButton" onclick="openShop()">상점</button>

    <!-- 게임 영역 -->
    <div id="gameArea">
        <h2>환영합니다, <span id="nicknameDisplay"></span> 님!</h2>
        <img id="swordImg" src="images/sword_lv0.png" width="200" onerror="this.style.display='none'"><br>
        <p id="swordName">검 이름: 그냥 소드.</p>
        <p>현재 레벨: <span id="currentLevel">0</span></p>
        <p>텅장(소지금): <span id="money">0</span> 원</p>
        <p>강화비용: <span id="enhanceCost">100</span> 원</p>
        <button class="gameControl" onclick="enhanceSword()">강화!!!</button>
        <button class="gameControl" onclick="sellSword()">소드 판매하기</button>
        <h3>🏆랭킹🏆</h3>
        <pre id="rankingBox"></pre>
    </div>

    <!-- 정보 박스 -->
    <div id="infoBox">
        <p style="font-weight:bold; font-size:22px; margin-bottom:8px;">강화 성공 확률</p>
        <p id="successRateDisplay" style="font-size:28px;">100%</p>
        <hr style="margin:8px 0;">
        <p>현재 소드 판매 가격: <span id="currentPriceDisplay">0 원</span></p>
        <p>다음 레벨 판매 가격: <span id="nextPriceDisplay">0 원</span></p>
        <hr style="margin:12px 0;">
        <p>현재 레벨: <span id="currentLevelInfo">0</span></p>
        <p>텅장(소지금): <span id="moneyInfo">0</span> 원</p>
        <p id="protectStatus">강화 보호 아이템: 없음</p>
    </div>

    <!-- 상점 -->
    <div id="shopArea">
        <h2>상점</h2>
        <p style="margin-bottom:10px; font-weight:bold;">
            🛡️ '87세 김미시 할머니의 최후의 갑옷'<br>
            효과: 강화 실패 시 소드 파괴 1회 방어
        </p>
        <button id="buyProtectBtn" onclick="buyProtectItem()">구매 (3000원)</button><br>
        <button onclick="closeShop()" style="margin-top:20px;">상점 나가기</button>
    </div>

    <!-- 게임 오버 화면 -->
    <div id="gameOverScreen">
        <video id="gameOverVideo" src="video/over.mp4" onerror="this.style.display='none'"></video>
    </div>

    <!-- 효과음 -->
    <audio id="successSound" src="sounds/success.mp3" onerror="this.style.display='none'"></audio>
    <audio id="failSound" src="sounds/fail.mp3" onerror="this.style.display='none'"></audio>
    <audio id="enhanceTrySound" src="sounds/enhanceTry.mp3" onerror="this.style.display='none'"></audio>
    <audio id="buyProtectSound" src="sounds/buyProtect.mp3" onerror="this.style.display='none'"></audio>
    <audio id="sellSound" src="sounds/sell.mp3" onerror="this.style.display='none'"></audio>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <!-- JS 스크립트 -->
    <script src="workspace.js"></script>
    <script src="data_UI.js"></script>
    <script src="effect_work.js"></script>

</body>

</html>